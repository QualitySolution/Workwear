= Установка программы
:experimental:

Программа «QS: Спецодежда и имущество» состоит из 2-х частей, которые могут быть установлены на разные компьютеры:

* серверная часть — это сервер баз данных MySQL\MariaDB, который хранит все ваши данные.
* клиентская часть — это непосредственно программа, которая устанавливается на компьютер пользователя и подключается к базе данных.

В многопользовательском варианте, сервер устанавливается только на 1 основной компьютер.

Программа оптимизирована для работы по низкоскоростным каналам, например, при связи с базой через интернет.
Это позволяет разместить базу данных на удаленном сервере, при таком режиме работы обратите особое внимание на безопасность, задавайте пользователям длинные пароли.

== Установка клиента на Windows
Для установки программы, скачайте дистрибутив со http://workwear.qsolution.ru/skachat-programmu/[страницы загрузки]. После этого запустите установщик, пройдите по шагам все пункты установки. Установщик автоматически предложит установить библиотеку GTK# и при необходимости платформу .Net Framework. Для установки .Net Framework необходим доступ в интернет.

image::setup-components.png[]

=== Демонстрационный сервер

Установка серверной части немного сложнее, чем установка клиентской части (непосредственно программы), поэтому если вы хотите просто посмотреть на возможности программы, вам нет необходимости устанавливать собственный сервер баз данных, можно установить только клиентскую часть и подключиться к демонстрационному серверу с следующими настройками:

[%autowidth, cols=">,<"]
|===
|Сервер:|demo.qsolution.ru

|Логин:|demo

|Пароль:|demo
|===

[#QS-Cloude]
=== QS: Облако

Один из самых простых способов использовать программу, не тратя время на установку собственного сервера базы данных и не заботясь о поддержки его работоспособности, это разместить базу данных у нас в облаке. Приобрести облако можно на странице http://pay.qsolution.ru/?edition=cloud[pay.qsolution.ru].

Сервис позволяет:
* оплачивать хостинг баз данных и лицензию на программу помесячно
* вести несколько баз на одном аккаунте
* создавать неограниченное количество пользователей, ограничение действует по количеству одновременных соединений

=== Свой сервер

Если вы хотите использовать программу в локальной сети, чтобы база данных хранилась на сервере предприятия, Вам понадобится установить MySql\MariaDB по инструкции ниже и создать чистую базу данных.

== Установка сервера базы данных

Далее нужно установить сервер базы данных. Сервер базы данных нужно устанавливать только на основном компьютере, то есть там, где будет хранится наша база. На остальных компьютерах достаточно установить только приложение.

Вы можете установить в качестве сервера MySQL или MariaDB. Эти базы данных очень похожи, мы в большинстве случаев рекомендуем MariaDB, так как ее проще устанавливать. Разницы в работе приложения не будет, поэтому выбирайте то, что больше нравится.

[WARNING]
====
Если на сервере работает Firewall, необходимо открыть порт 3306.
====

Инструкция по установке MySQL <<MySQL,ниже>>.
[#MariaDB]
=== Установка сервера MariaDB

Скачать дистрибутивы MariaDB можно с http://workwear.qsolution.ru/skachat-programmu/[нашего сайта] или с https://mariadb.com/downloads/[официального сайта].

Запускаем скаченный установщик

image::MariaDB-1.png[]

Соглашаемся с лицензией, нужно поставить галочку…

image::MariaDB-2.png[]

На странице выбора компонентов можно оставить все по умолчанию. Хотя на самом деле достаточно установить только Database Instance.


image::MariaDB-3.png[]

На следующем шаге вводим пароль администратора базы данных (root). Обязательно запомните этот пароль, он вам понадобится для проведения дальнейших действий с базой. На этом шаге также обязательно устанавливаем галочку «Use UTF8 as default server’s character set», чтобы сервер работал с кодировкой UTF8, это необходимо для работы приложения. Также можно установить галочку «Enable access from remote machines for ‘root’ user», позволяющая доступ администратору к базе данных с других компьютеров, это позволит производить обновление программы не на сервере.

image::MariaDB-4.png[]

На следующем шаге, можно оставить все без изменений…

image::MariaDB-5.png[]

Тут можно помочь разработчикам и отправлять анонимную статистику

image::MariaDB-6.png[]

Все данные собраны, можно нажать кнопку btn:[Install] и установить сервер MariaDB.

image::MariaDB-7.png[]

Все сервер установлен. Можно переходить к <<create-database,созданию базы данных>>.

[#MySQL]
=== Установка сервера MySQL

Веб установщик сервера можно скачать также с нашего сайта со http://workwear.qsolution.ru/skachat-programmu/[страницы загрузки]. Обратите внимание, что в последних версиях MySQL сервер доступен только в 64-битном варианте.

Запускаем установщик, если он при старте попросит обновить версию самого установщика можно согласится и скачать более свежую. На первом экране соглашаемся с лицензией.

image::MySQL-1.png[]

В на следующей странице в типе установки выбираем «Server only».

image::MySQL-2.png[]

Далее веб установщик предложит скачать из интернета подходящую под вашу систему версию сервера MySQL. Нажимаем btn:[Execute], установщик скачает и запустит установку сервера.

image::MySQL-3.png[]

После установки, необходимо настроить сервер. Нажимаем btn:[Next >].

image::MySQL-4.png[]

Выбираем тип установки, вам скорей всего нужен отдельный сервер.

image::MySQL-5.png[]

В «Config Type» выбираем «Server Machine». Остальные пункты можно оставить без изменений.

image::MySQL-6.png[]

На следующей странице выбираем метод аутентификации, выбираем традиционный (Use Legacy Authentication Method)

image::MySQL-7.png[]

На следующем экране нам необходимо задать пароль для администратора (root) сервера. Введите его и запомните, он вам понадобится в дальнейшем для выполнения административных действий с базой, таких как создание пользователей, создание и обновление базы.

image::MySQL-8.png[]

На следующем экране все оставляем по умолчанию.

image::MySQL-9.png[]

Нажимаем btn:[Execute] для применения сделанных настроек.

image::MySQL-10.png[]

На этом настройка MySQL закончена, дождитесь завершения выполнения и переходим к созданию базы.

image::MySQL-11.png[]

[#create-database]
== Создание чистой базы данных

Запускаем программу «QS: Спецодежда и имущество» с рабочего стола. В окне входа выбираем «Редактор подключений».

image::create-base-1.png[]

В редакторе подключений нажимаем на кнопку с создания нового подключения btn:[+].

image::create-base-2.png[]

Вводим название подключения (будет отображаться в окне входа), адрес сервера MySQL, если сервер установлен на этом компьютере можно написать «localhost», если сервер на другом компьютере нужно указать адрес этого компьютера. Имя базы данных, имеет смысл менять, только для создания более одной базы. Нажимаем кнопку «Создать базу на сервере…».

image::create-base-3.png[]

Вводим пароль администратора, который мы вводили на этапе установки сервера базы данных.

image::create-base-4.png[]

Подождем пока идет создание базы.

image::create-base-5.png[]

[#create-user]
== Создание пользователей

После создания базы, нужно зайти в программу под администратором(root) для создания рабочих пользователей.

image::create-user-1.png[]

Добавим одного пользователя.

image::create-user-2.png[]

Более детальная информация о заполнение полей пользователя находится в разделе <<users.adoc#user-edit,Создание и изменение пользователя>>.

TIP: Если вы купили программу не забудьте <<settings.adoc#serial-number,ввести полученный серийный номер>> для активации всех возможностей. Это нужно сделать один раз для каждой новой базы данных.

== Настройка подключения к серверу базы данных

На основном компьютере мы уже создали новое подключение когда создавали базу. При использовании программы в многопользовательском режиме, подключение к базе данных нужно будет настраивать на всех компьютерах. Для запуска редактора соединений в окне входа нажимаем кнопку ➊.

image::connection-button.png[]

В редакторе соединений есть две области. Область ➊ позволяет добавить новое соединение или удалить одно из имеющихся. Добавленные здесь соединения появятся на экране входа. Область ➋ отвечает за настройку выбранного в списке слева соединения.

image::connection-edit-common.png[]

Можно выбрать 2 типа подключения: `Сервер MySQL` и `Облако Quality Solution`.

=== Подключение к сервер MySQL

Программа поддерживает работу с серверами базы данных MariaDB всех версий и MySQL начиная с 5.6, для MySQL 8.0 в режиме Legacy Authentication.

Название подключения:: Любое название базы понятное пользователю, оно будет отображаться в окне входа.
Сервер:: IP-адрес или имя компьютера на котором расположен сервер.

[TIP]
====
Если необходимо подключится к серверу с нестандартным номером порта, адрес сервера можно указать в формате ``адрес:порт``.
====

Название базы:: Имя базы на сервере. С настройками сервера по умолчанию, заглавные и строчные символы имеют значение.

В этом же окне есть возможность создать новую базы данных нажав btn:[Создать базу на сервере...]. см. <<#create-database>>

=== Подключение к облаку Quality Solution

image::connection-edit-cloud.png[]

Название подключения:: Название, отображаемое в окне входа.
Название базы:: Имя базы на сервисе «QS: Облако». Устанавливается при создании базы, обычно высылается вам на почту после регистрации и оплаты сервиса.
Логин:: Имя вашей общей учетной записи. Выдается при регистрации.