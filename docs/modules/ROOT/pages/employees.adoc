= Данные о сотрудниках
:experimental:

[#employees]
== Карточка сотрудника

Корректное заполнение данных о сотруднике, является важнейшей задачей учета выдачи СИЗ. Диалог карточки сотрудника имеет несколько вкладок разного назначения, далее разберем их отдельно.  

image::employees_journal.png[]

В журнале сотрудников сотрудник может быть выделен следующими цветами:

Серый:: Сотрудник уволен.
Синий:: Сотрудник в текущий момент находится в отпуске.

TIP: В редакции предприятие, если для сотрудника введен серийный номер бесконтактной карты, он помечен специальным значком.

=== Основная информация

image::employees-wearcard.png[]

В карточке сотрудника как минимум нужно заполнить Ф.И.О и пол, все остальные поля являются необязательными. Номер карточки учета обычно присваивается автоматически, но при желании можно его установить вручную.

TIP: Программа автоматически проставит пол сотрудника по его имени.

Если поле дата увольнения ❶ заполнено, программа будет считать этого сотрудника уволенным. При смене должности программа предложит заполнить дату изменение должности ❷ (она указывается в печатной карточке сотрудника).

При активированном <<mobile-app.adoc,мобильном кабинете сотрудника>>, в поле ❸ можно установить пароль для его личного кабинета. После этого сотрудник сможет зайти личный кабинет через приложение, по номеру телефону и установленному паролю. Кнопка с "глазиком" отобразит пароль. Кнопка с "кубиком", создаст случайный пароль.

[#employee-uid-card]
В редакции «Предприятие» для осуществления <<#identity-cards,выдачи по картам СКУД>>, к сотруднику можно привязать UID его карты. Его можно ввести вручную ❹ или прочитать со считывателя, нажав кнопку btn:[Прочитать], рядом с полем «UID карты».

При желании, к карточке сотрудника можно прикрепить фотографию, для визуальной идентификации при выдаче. По умолчанию, поле с фотографией скрыто за правой панелью ❺.

=== Размеры

image::employees_wearcard-sizes.png[]

Для того, чтобы программа могла автоматически подобрать подходящую складскую позицию при выдаче, не забывайте перед выдачей спецодежды заполнять размеры сотрудника.

По умолчанию при подборе подходящей спецодежды программа понимает, что если в номенклатуре размер указан диапазоном (например «44-46»), а в сотруднике просто «44», то спецодежда ему подходит. Так же, программа умеет сопоставлять международные размеры XXL c российскими. То как программа будет подбирать размеры настраивается в <<stock.adoc#sizes,справочнике размеров>>. Там же можно отключить отображение в карточке неиспользуемые типы размеров или добавить свои типы и размеры.

[#used-norms]
=== Применённые нормы

К каждому сотруднику можно привязать несколько <<regulations.adoc#norms,норм>>, из них будут сформированы потребности сотрудника, причем нормы будут не просто сложены, а объеденины. Например, если по нескольким нормам сотрудник должен получить одинаковую позицию, она будет выдана только один раз. Если в разных нормах у одной и той же позиции отличаются количество или сроки носки, то результирующие строки носки будут установлены по норме, предъявляющий самые жесткие требования. Например, если по одной норме сапоги надо выдать на 1 год, а по другой на 2 года, будет выбрана норма с наименьшим сроком носки.

Кнопка btn:[По должности], автоматически устанавливает нормы на основании указанной должности сотрудника.

TIP: Если вы хотите добавить одну норму нескольким сотрудникам, удобнее это сделать через вкладку «Сотрудники» в самой <<regulations.adoc#norms,норме>>.

[#issue-siz]
=== Потребности в спецодежде

Вкладка «Спецодежда по нормам» отображает текущую потребность сотрудника в спецодежде, по ней можно сориентироваться, что положено сотруднику к выдаче и в каком количестве, когда сотрудник последний раз получал спецодежду по каждой позиции и когда следующее получение. Если у сотрудника установлены размеры, табличка также отображает наличие на складе подходящей к выдаче номенклатуры.

Многие колонки таблицы для наглядности имеют цветовую подсветку. В правом верхнем углу диалога находится кнопка отображающая легенду цветов.

image::employees_wearcard-items.png[]

Через контекстное меню(правая кнопка мыши) строки таблицы вы можете открыть используемую норму, номенклатуру нормы или документ с последней выдачей по этой строке.

Также из контекстного меню можно пересчитать срок носки в последней выдачи. Это может понадобится в случае изменения сроков в норме. Обычно при смене срока носки в норме, срок носки у уже полученной по этой норме спецодежды не пересчитывается, так как сотрудник получив спецодежду уже расписался в ведомости с указанием старого срока. Но в ситуации, если в норме были указанны ошибочные сроки их нужно пересчитать для приведения к правильному состоянию.

О различных сдвигах даты следующий выдачи в зависимости от дополнительных условий, таких как попадание даты выдачи в период отпуска сотрудника или при сезонной выдачи, можно узнать по значку с восклицательным знаком около даты следующий выдачи, при наведении на который программа пояснит повлиявшие на расчета следующей выдачи факторы.

Кнопка btn:[Обновить потребности], пересчитывает потребности сотрудника по привязанным нормам. Обычно обновлять потребность вручную не требуется, но добавлении норму строк после привязки ее к сотруднику, необходимо выполнить эту операцию вручную.

Произвести <<stock-documents.adoc#employee-issue,выдачу>> новой спецодежды можно прямо из карточки сотрудника, нажав кнопку btn:[Выдать недополученное].

[#manual-issue]
==== Ручные операции выдачи

Кнопка btn:[Ручные операции выдачи], позволяет установить дату последней выдачи вручную с помощью фиктивных операций выдачи, не проводя саму выдачу спецодежды со склада. Данная возможность поможет вам проще начать использовать программу. Так как скорей всего до первого запуска программы, ваши сотрудники уже получали спецодежду и карточки были заполнены, так вы сможете заполнить информацию о прошлых выдачах. Если последняя операция выдачи была добавлена вручную рядом с датой выдачи в табличке появится ручка.

image:employees_manual-issue.png[]

Сбрасывать предыдущие движения:: Если галочка установлена, эта операция перекроет все предыдущие выдачи, то есть она обнулить все что числилось за сотрудником до ее.

При установке конкретной номенклатуры, если к ней применяются размеры определенного типа, программа позволит так же выбрать размер.

Если номенклатура позволяет использовать штрихкоды, в диалоге появится возможность создать и распечатать штрихкод для выдаваемой номенклатуры.

[#issue]

==== Хронология

В сложных ситуациях, когда происходила частичная выдача или выдача больше необходимого по норме количества спецодежды с увеличением срока носки, из таблицы потребностей может быть неочевидно почему программа сделала именно такой расчет даты следующей выдачи, для получения детальной информацию о количестве числящегося за сотрудником по выделенной потребности в течении времени, можно воспользоваться кнопкой btn:[Хронология].

image::employees_wearcard-timeline.png[]

Таблица хронологии отображает хронологический список дат в которых что-то происходило учете по выбранной потребности.

С даты:: дата начала периода описывающего строку.
Выдано:: количество выданного в указанную в первой колонке дату.
Списано:: количество списанного в указанную в первой колонке дату.
Числится:: количество числящейся за сотрудником спецодежды по выбранной потребности в течении всего периода, с даты в первой колонке до даты в следующей строке.
Используется:: количество выданной сотруднику спецодежды срок использования которой уже начался. При определенных настройках учета можно выдать спецодежду заранее но срок ее эскплуатации начнется с определенной даты. Такая спецодежда уже будет числится за сотрудником, но период носки ее еще не наступил.
Корректировка:: Если стоит "да", то в эту дату была внесена ручная операция выдачи, которая обнуляет предыдущую историю. То есть все выданное до этой даты в независимости о количества списывается автоматически.

=== Числится за сотрудником

Вкладка числится за сотрудником отображает детальную информацию по всем позициям, числящимся за сотрудником, в том числе выданным без потребностей(без нормы), или в ситуациях, когда потребность пропала, например, при смене нормы на другую. Табличка также позволяет наглядно увидеть процент износа на сегодня выданной спецодежды. 

[#history]
=== История выдач

На вкладке в хронологическом порядке отображается список всех операций выдачи\возврата\списания спецодежды по сотруднику. Здесь можно быстро найти каким именно документом была осуществлена выдача конкретной позиции. Выполнив двойной щелчок мыши по колонке с документом или через контекстное меню и пункт menu:Редактирование[], можно перейти в документ.

Там же через контекстное меню можно заменить номенклатуру нормы у уже выданной позиции. Это может понадобится в ситуации когда, у сотрудника норма поменялась и надо зачесть выданное по одной номенклатуре нормы, как выданное в качестве другой номенклатуры нормы.

А <<#manual-issue,ручные операций>> или <<import.adoc#excel-import-issue,загруженные из Excel>>, то есть созданных без документа, отсюда можно удалить.

Табличка также позволяет изменить режим списания спецодежды. То есть, включить или выключить автоматическое списания для каждой выданной позиции, галочкой в колонке `автосписание`. Задать настройку по умолчанию для режима списания можно в <<settings.adoc#accounting-settings,настройках учета>>.

[#print-wear-card]
=== Личная карточка учета выдачи СИЗ

Из диалога редактирования данных о сотруднике можно распечатать личную карточку учета выдачи СИЗ, по форме указанной в «Приложении к Межотраслевым правилам обеспечения работников специальной одеждой, специальной обувью и другими средствами индивидуальной защиты, утвержденным Приказом Минздравсоцразвития России от 01.06.2009 № 290н (в ред. Приказа Минздравсоцразвития РФ от 27.01.2010 № 28н)»

image::employees-print-wearcard.png[]

== Учет отпусков

Вкладка «Отпуска» в каточке сотрудника позволяет ввести информацию о датах, на которые сотрудник взял отпуск. Если дата следующего получения попадает на даты отпуска, то следующая выдача спецодежды будет сдвинута на первый день после выхода сотрудника из отпуска.

=== Типы отпусков

Через меню menu:Справочники[Виды отпусков], можно создать несколько различных типов отпусков. В основном, это чисто информативный справочник о типе отпуска. У типа отпуска помимо имени есть параметр «Исключить отпуск из носки», он позволяет продлевать сроки носки на время, которое сотрудник пребывает в отпуске. Это подходит для длительных видов отпусков, таких как «Навигационный» или «Декретный».

[#identity-cards]
== Выдача по бесконтактным картам

NOTE: Функциональность доступна только в версии "Предприятие"

Имеется возможность выдачи спецодежды сотрудникам по бесконтактным картам СКУД, которые на больших предприятиях обычно получают все сотрудники для доступа в различные помещения. Поддерживаются считыватели RusGuard (https://www.rgsec.ru/schityvatel-kart/r5-usb[R5-USB] и https://www.rgsec.ru/schityvatel-kart/r5-usb-prof[R5-USB Prof]). Нами протестирована работа с картами Mifare, технически должны поддерживаться все стандарты карт, поддерживаемые считывателями, если у вас возникли проблемы с каким-либо типом карт, напишите нам в техническую поддержку.

Для работы этого механизма к каждому сотруднику должен быть привязан номер его карты. Номер карты можно привязать как из <<#employee-uid-card,диалога карточки сотрудника>>, так и <<import.adoc#employees-excel-import,загрузив>> номера карт из Excel файла массово, который например можно сформировать по данных СКУД.

Диалог выдачи по бесконтактным картам открывается кнопкой btn:[Выдача] на панели инструментов. Он реализован в виде отдельного окна программы, чтобы  кладовщик мог переместить его на отдельный, предназначенный для получающего спецодежду.  

Первоначально работу со считывателем карт нужно настроить. Для этого нажмите кнопку btn:[Настройка] в диалоге. Выберите используемый считыватель, если программа обнаружила их несколько и укажите типы используемых карт. После этого считыватель переключится в режим постоянного опроса, об этом будут сигнализировать бегающий индикатор [▱▰▰▰▱▱▱] в информационной строке. Для организации выдачи, вы также должны указать склад выдачи. Программа сохранит эти настройки на компьютере для использования при последующих запусках. 

image::employees-setup-cardreader.png[]

TIP: Диалог выдачи реализован отдельным окном, чтобы его можно было переместить на второй экран(монитор), видимый получающему спецодежду сотруднику.

Выдача по карточкам происходит по максимально простой схеме:

. Сотрудник подносит карточку к считывателю первый раз.
. На экране отображается спецодежда, которую он может получить.
. Сотрудник склада готовит спецодежду к выдаче, при необходимости корректируя цифры в документе.
. Если все правильно, сотрудник подносит карточку к считывателю второй раз, для подтверждения выдачи.
. Программа создает документ выдачи сотруднику и готова принимать карточку следующего сотрудника для поиска.

image::employees-identity-cards-issue.png[]

Тайм-штамп точного времени второго считывания с номером карты хранится в операции выдачи. Тайм-штамп будет выведен на печать <<#print-wear-card,оборотной стороне в личной карточке учета>> сотрудника, получившего одежду в колонке подпись.
