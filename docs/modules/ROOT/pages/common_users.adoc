[[_users]]
= Работа с пользователями
:doctype: book
:sectnums:
:toc: left
:icons: font
:experimental:
:sourcedir: .

В программе каждый пользователь подключается к базе MySQL под своей учетной записью, это позволяет применять права доступа на уровне сервера баз данных.
В то же время, в программе имеется внутренний справочник пользователей, позволяющий задавать некоторые права на уровне программы и вносить имена пользователей на русском языке.

Если пользователь создан с помощью MySQL, то при первом входе в программу его логин автоматически добавляется во внутренний справочник пользователей и становится доступен через меню menu:Файл[] пункт 
// <guimenuitem>Пользователи</guimenuitem>
$$.$$


image::Users.png[]


[WARNING]
====
Этот пункт меню доступен только пользователям с правом [label]#Администрирования пользователей#.
====
ifdef::bazar[]

Помимо права изменять существующих в программе пользователей, пользователю также можно дать право изменять кассовые документы задним числом, то есть созданные не сегодня.
endif::bazar[]


image::Bazar_User.png[]


== Безопасность сервера баз данных

При доступе к серверу MySQL через интернет, обратите особое внимание на безопасность сервера в целом.
Программа &product_name;при соединение с сервером не использует шифрование, поэтому пароли пользователей относительно легко перехватить, наиболее безопасным вариантом организации удаленного доступа будет работа с удаленным сервером через VPN-туннель.

Также, обратите внимание, что программа при создании учетной записи с правом администрирования пользователей дает этому пользователю права на доступ к внутренней базе mysql и таблице со всеми пользователями сервера, при этом позволяя ему соединятся с любого хоста.
Поэтому, злоумышленник перехватив пароль такого пользователя может получить доступ к любой базе на сервере или скинуть пароль root-а.
Для того чтобы избежать такой ситуации, не давайте удаленным пользователям право администратора и ограничьте доступ пользователей с правом администратора только с localhost или внутренней сети.
Это можно сделать средствами MySQL.

[[_add_users]]
== Добавление пользователей средствами MySQL

Вы можете добавлять и удалять пользователей средствами MySQL, это может дать вам более гибкое управление правами пользователя, например позволит ограничить доступ к базе данных только с определенных компьютеров.

В этом разделе рассмотрим простое создание пользователя с помощью WorkBench.
Для этого подсоединитесь к серверу в режиме [label]#Server Administration# перейдите в раздел `Users and Privileges` и нажмите кнопку btn:[Add Account].


image::6-AddUser.png[]

На вкладке `Login` вводим имя нового пользователя и пароль.
Сохранить пользователя можно нажав ``Apply``.


image::7-UserName.png[]

Теперь надо дать нашему новому пользователю доступ к базе &dbname;.
Для этого переходим на вкладку ``Schema Privileges``.
Выбираем нашего пользователя и нажимаем кнопку ``Add Entry..``.


image::8-UserPermission.png[]

Выбираем `Selected Schema` и указываем базу данных &dbname;.
Нажимаем «Ok».


image::9-BasePermission.png[]

Строчка с правами добавилась в таблицу, теперь нажимаем `Select ALL` и ``Save Changes``.


image::10-SetPermission.png[]

Все, добавление нового пользователя закончено, теперь под ним можно зайти в базу.
При первом входе в базу он автоматически добавится во внутреннюю таблицу пользователей программы &product_name;.