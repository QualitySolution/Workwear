[#postamat]
= Постаматы
:experimental:
:imagesdir: ../images

NOTE: Функциональность доступна только в рамках проектов «Спецаутсорсинг»

== Введение

Через постаматы обеспечивается сдача в стирку и выдача спецодежды из стирки. Есть два типа постаматов на сдачу и на выдачу.

.Постамат выдачи
image::postomat_terminal.jpeg[]

Движение обслуживаемой спецодежды через постаматы выглядит следующим образом:

. Сотрудник приносит грязную одежду в постамат сдачи и сдает ее в стирку с помощью карточки СКУД. В программе появляется новая заявка на обслуживание со статусом «В постамате приема».
. Сотрудник склада отслеживает загруженность постаматов, принимает решение на забор грязной спецодежды.
. Водитель забирает из постаматов грязную спецодежду. В программе меняется статус «В пути».
. Машина приезжает в прачечную, водитель передает мешок.
. Оператор проводит приемку в программе. Сканирует каждую позицию, чтобы отметить что пришло, а что нет. На этом этапе спецодежда переходит в статус «В стирке».
. После стирки контроль и сортировка, на выдачу или в ремонт. Предназначенное для ремонта сканируется, чтобы передать в ремонт.
. Спецодежда, готовая к выдаче добавляется в документ наполнения постамата. Пакеты с индивидуальной закладкой маркируются номером ячейки. В этот момент статус одежды переходит «В пути».
. Водитель загружает в ячейки постамата спецодежду.
. Сотрудник на мобильное устройство получает уведомление "Ваша спецодежда готова к выдаче в аппарате автоматической выдачи корпус 801-1". Статус «В постамате выдачи».
. Сотрудник приходит к постамату забирает свою одежду, по карточке. Статус «Возвращена».

Ниже рассматриваем подробно каждый этап этого процесса.

== Сдача спецодежды в стирку через постамат

Сдача в стирку происходит через постаматы типа «Вятка». Постамат приветствует сотрудника экраном входа в систему.

image::postomat_laundry-welcome.png[]

Сотрудник прикладывает карточку СКУД к считывателю. Появляется экран с выбором действий. В данном случае действие только одно «Сдать в стирку».

image::postomat_laundry-actions.png[]

После выбора действия появляется экран со спецодеждой сотрудника, которую можно сдать. В данном примере можно сдать только «Костюм ОПЗ».

image::postomat_laundry-clothes.png[]

Сотрудник выбирает спецодежду, которую хочет сдать в стирку. Далее необходимо просканировать штрихкод на спецодежде в качестве подтверждения что сдается именно эта спецодежда.

image::postomat_laundry-scaning.png[]

Если был просканирован правильный штрихкод, откроется приемный лоток, сотрудник кладет в него спецодежду. Момент сдачи спецодежды записывается на видео, для подтверждения приёма спецодежды.

image::postomat_laundry-open-door.png[]

После закрытия лотка, просто нажимаем кнопку «Завершить».

image::postomat_laundry-close-door.png[]

В системе появляется новая заявка на обслуживание со статусом «В постамате приема». Все заявки на стирку отображаются в меню menu:Склад[Обслуживание спецодежды].

image::postomat_service-claims.png[]

== Отслеживание загруженности постаматов

Проверить загруженность постаматов, а так же время когда постомат был последний раз онлайн, можно в меню menu:Сервисы[Загруженность постаматов]. 

image::postomat_fullness.png[]

Для постаматов выдачи в этой табличке можно отслеживать закладку которую дольше всех не забирает сотрудник.

Для постомата сдачи в стирку, отслеживается текущая заполненность грязной одеждой, при необходимости можно организовывать изъятие спецодежды. Перед отправкой машины на забор спецодежды можно распечатать ведомость на забор. Для этого идем в меню menu:Сервисы[Документы постаматов на забор]. Создаем новый документ забора, нажимаем кнопку btn:[Заполнить], в этот момент в документ добавится все что сейчас находится в постаматах забора, не нужные строки можно удалить. Печатаем документ водителю.

.Ведомость на забор спецодежды
****
image::postomat_laundry-print.png[]
****

NOTE: Создание документа на изъятие не является обязательной, процедуру изъятия из постамата можно провести и без нее. Этот документ нужен исключительно для печати ведомости на забор.

== Изъятие грязной спецодежды из постамата

На постамате сдачи в стирку входим в систему под техническим пинкодом.

image::postomat_laundry-pincode.png[]

Появляется экран с выбором действий. Нас интересует действие «Изъять в стирку».

image::postomat_laundry-service-actions.png[]

На следующем экране отобразится вся сброшенная в постамат спецодежда. В примере это всего один костюм ОПЗ. Отмечаем галочками всю спецодежду, которую изымаем из постамата и нажимаем кнопку «Подтвердить».

image::postomat_laundry-take-away.png[]

Проверяем что все бирки на спецодежде соответствуют списку и подтверждаем изъятие на следующем экране. 

image::postomat_laundry-take-away-confirm.png[]

В системе статус всех заявок на обслуживание для забранной спецодежды меняется на «В пути».

[#acceptance-in-launderette]
== Приемка спецодежды в прачечной

Приемка спецодежды в прачечной проводиться в журнале заявок на обслуживание, меню menu:Склад[Обслуживание спецодежды]. Кнопкой btn:[Выполнить движение] открываем форму приемки.

image::postomat_service-move.png[]

С помощью сканера сканируем штрихкод на принимаемой спецодежде. Для каждой просканированной позиции появляется детальная информация, кому принадлежит спецодежда и история операций с заявкой. Указываем новый статус «В стирке», при необходимости можно добавить комментарий к переключению в новый статус. Кнопкой btn:[Изменить статус] сохраняем изменения и переходим к следующей позиции.

После стирки часть спецодежды, требующая ремонта тем же способом переводится в статус «В ремонте». Остальную спецодежду можно отправить в постамат выдачи.

== Формирование документа пополнения постамата выдачи

Перед отправкой машины для пополнения постамата, необходимо сформировать документ наполнения. Документ наполнения можно сформировать в журнале menu:Сервисы[Документы постаматов].

image::postomat_documents.png[]

NOTE: Документ пополнения постомата нельзя удалить, но до того как он принять на постомате можно отменить, нажав кнопку btn:[Отменить документ] в журнале. Это действие не обратимо.

Создаем новый документ пополнения кнопкой btn:[Добавить]. В нем указываем постамат, который будем пополнять.

image::postomat_document.png[]

Заполняем строки документа, при добавлении новый позиций в документ система автоматически вычисляет свободную ячейку для загрузки, при необходимости ячейку можно скорректировать. После сохранения, документ передается в постамат выдачи, а статус всех добавленных в документ заявок меняется на «В пути».

image::postomat_service-claims-transit.png[]

Готовим индивидуальные закладки с маркировкой каждого пакета и отправляем водителя на пополнение постамата. Через кнопку btn:[Печать] можно распечатать этикетки на индивидуальные пакеты.

.Этикетка на индивидуальный пакет
****
image::postomat_document_sticker.png[width=200]
****

Так же можно распечатать список позиций для пополнения постамата.

.Ведомость на загрузку постамата
****
image::postomat_document_income-print.png[]
****

== Пополнение постамата выдачи

На постамате выдачи входим в систему под техническим пинкодом.

image::postomat_aso-pincode.png[]

Появляется экран с выбором действий. Нас интересует действие «Пополнение склада».

image::postomat_aso-service-actions.png[]

Если для постамата был создан документ пополнения, он отобразится на следующем экране. Если не обработанных документов несколько, в данное действие необходимо выполнить несколько раз, чтобы принять все отправленные на постамат документы, обработка их возможна только в порядке создания, документ пропустить нельзя. 

image::postomat_aso-income-document.png[]

В документе прихода видим список всех закладываемых позиций и в какую ячейку их необходимо положить. Кнопкой btn:[Открыть ячейки] открываем все ячейки для загрузки. Внимательно проверяя закладку пополняем все ячейки спецодеждой. Закрываем разложенные ячейки и нажимаем кнопку btn:[Подтвердить].

На следующем экране подтверждаем корректность закладки.

image::postomat_aso-income-document-confirm.png[]

После подтверждения в системе все заявки на обслуживание из документа переходят в статус «В терминале выдачи». А сотруднику предприятия если у него установлено <<mobile-app.adoc#mobile-app,мобильное приложение>> приходит уведомление о том, что его спецодежда готова к выдаче.

== Получение спецодежды из постамата

Сотрудник приходит к постамату выдачи, входит в систему приложив карточку СКУД.

image::postomat_aso-welcome.png[]

Появляется экран с выбором действий. Нас интересует действие «Взять предмет».

image::postomat_aso-actions.png[]

На следующем экране выбираем категорию интересующей нас спецодежды.

image::postomat_aso-category.png[]

Далее выбираем предмет, который хотим получить.

image::postomat_aso-goods.png[]

Появляется детальная информация о получаемой спецодежде. Нажимаем кнопку btn:[Получить товар].

image::postomat_aso-take-goods.png[]

Открывается ячейка со спецодеждой, забираем спецодежду и закрываем ячейку. 

image::postomat_aso-take-goods-complete.png[]

Нажимаем кнопку btn:[Завершить], для выхода из системы.

В системе статус заявки на обслуживание меняется на «Возвращена». На этом цикл стирки спецодежды заканчивается.
